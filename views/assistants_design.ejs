<h2>Design</h2>
<p class="small">Translate insights into a testable ruleset.</p>
<form method="post" action="/assistants/design/spec">
  <div class="grid cols-3">
    <div class="card">
      <h3>Scaffold</h3>
      <label>Template</label>
      <select class="input" name="templateId">
        <option value="">Custom</option>
        <% templates.list.forEach(t => { %>
          <option value="<%= t.id %>"><%= t.name %></option>
        <% }) %>
      </select>
      <label>Symbol</label><input class="input" name="symbol" value="<%= params.symbol || 'ES' %>"/>
      <label>Timeframe</label><input class="input" name="timeframe" value="<%= params.tf || '1m' %>"/>
    </div>
    <div class="card">
      <h3>Entries & Filters</h3>
      <label>EMA Fast</label><input class="input" name="emaFast" value="20"/>
      <label>EMA Mid/Slow</label><input class="input" name="emaMid" value="50"/>
      <input class="input" name="emaSlow" value="200"/>
      <label>RSI Period</label><input class="input" name="rsiPeriod" value="14"/>
      <label>ADX Threshold</label><input class="input" name="adx" value="20"/>
    </div>
    <div class="card">
      <h3>Risk & Time</h3>
      <label>ATR Period</label><input class="input" name="atrPeriod" value="14"/>
      <label>ATR Stop Mult</label><input class="input" name="atrMultStop" value="0.6"/>
      <label>Risk/Reward</label><input class="input" name="rr" value="3"/>
      <label>Session Window (PT)</label><input class="input" name="session" value="06:30-12:59"/>
    </div>
  </div>
  <p class="notice small">Guardrails: Time-of-day normalized; warns on overly tight stops.</p>
  <button class="btn gold">Create Spec</button>
</form>

<% if (spec) { %>
  <h3>Strategy Spec (saved to Project)</h3>
  <div class="code"><%= spec %></div>
  <a class="btn" href="/assistants/generate">Hand off to Generate â†’</a>
<% } %>
